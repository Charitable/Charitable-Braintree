!function(e){function a(e){if(e.__proto__.hasOwnProperty("remove_pending_process_by_name"))return e.remove_pending_process_by_name("braintree");if(e.__proto__.hasOwnProperty("remove_pending_process")){var n=this.pending_processes.indexOf("braintree");return-1!==n&&this.remove_pending_process(n)}e.pause_processing=!1}function o(e){function o(e){return{totalPriceStatus:"ESTIMATED",totalPrice:e.format_amount(e.get_amount()),currencyCode:CHARITABLE_VARS.currency,countryCode:CHARITABLE_VARS.country}}function r(e){return{total:{label:CHARITABLE_BRAINTREE_VARS.description,amount:e.format_amount(e.get_amount())},requiredBillingContactFields:["postalAddress"]}}var n,t;n=e,t={authorization:CHARITABLE_BRAINTREE_VARS.client_token,container:"#charitable-braintree-dropin-container"},"1"===CHARITABLE_BRAINTREE_VARS.paypal&&(t.paypal={flow:"vault"}),"1"===CHARITABLE_BRAINTREE_VARS.venmo&&(t.venmo={}),"1"===CHARITABLE_BRAINTREE_VARS.googlepay&&(t.googlePay={googlePayVersion:2,transactionInfo:o(n)},"1"!==CHARITABLE_VARS.test_mode&&(t.googlePay.merchantId=CHARITABLE_BRAINTREE_VARS.googlepay_merchant_id)),"1"===CHARITABLE_BRAINTREE_VARS.applepay&&(t.applePay={displayName:CHARITABLE_BRAINTREE_VARS.description,paymentRequest:r(n)}),braintree.dropin.create(t,function(e,t){i.on("charitable:form:total:changed",function(e,n){t.updateConfiguration("googlePay","transactionInfo",o(n)),t.updateConfiguration("applePay","paymentRequest",r(n))}),i.on("charitable:form:validate",function(e,o){"braintree"===o.get_payment_method()&&0===o.errors.length&&(function(e){e.__proto__.hasOwnProperty("add_pending_process")?e.add_pending_process("braintree"):e.pause_processing=!0}(o),t.requestPaymentMethod(function(e,n){if(e)return o.add_error(e.message+" ["+e.name+"]"),a(o),!1;o.get_input("braintree_token").val(n.nonce),a(o)}))})})}var i=jQuery("body");i.on("charitable:form:initialize",function(e,n){o(n)})}();